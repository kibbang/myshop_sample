<!-- templates/shop/home/index.html -->
<div th:fragment="content">

    <!-- HERO -->
    <div class="container-xl mt-4">
        <div class="card">
            <div class="card-body p-5">
                <div class="row align-items-center">
                    <div class="col-md-7">
                        <div class="text-muted mb-2">MYSHOP</div>
                        <h1 class="mb-3">오늘 필요한 걸, 빠르게.</h1>
                        <p class="text-muted mb-4">
                            대표 SKU 기준으로 바로 주문할 수 있는 미니 쇼핑몰.
                        </p>

                        <div class="d-flex gap-2">
                            <a th:href="@{/products}" class="btn btn-primary">상품 보러가기</a>
                            <a th:href="@{/orders}" class="btn btn-outline-secondary">내 주문 조회</a>
                        </div>
                    </div>

                    <!-- 이미지 자리 -->
                    <div class="col-md-5 d-none d-md-block">
                        <div class="ratio ratio-16x9 bg-light rounded overflow-hidden">
                            <img class="w-100 h-100"
                                 style="object-fit: cover;"
                                 th:src="@{/assets/images/products/default.jpg}"
                                 alt="product image">
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- QUICK CATEGORIES (placeholder) -->
    <div class="container-xl mt-4">
        <div class="row g-3">
            <div class="col-6 col-md-3">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">전자/IT</div>
                        <div class="text-muted small">준비중</div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">생활/주방</div>
                        <div class="text-muted small">준비중</div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">패션</div>
                        <div class="text-muted small">준비중</div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">식품</div>
                        <div class="text-muted small">준비중</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PRODUCTS -->
    <div id="section-products" class="container-xl mt-5">
        <div class="d-flex align-items-end justify-content-between mb-3">
            <div>
                <div class="text-muted">추천</div>
                <h2 class="m-0">지금 바로 주문 가능한 상품</h2>
            </div>
            <!-- 나중에 정렬/필터 넣을 자리 -->
        </div>

        <div class="row row-cards">

            <!-- 카드 반복 -->
            <div class="col-6 col-md-4 col-lg-3" th:each="item : ${cards}">
                <div class="card h-100">

                    <!-- 상품 이미지 자리(placeholder) -->
                    <div class="position-relative">
                        <div class="ratio ratio-4x3 bg-light overflow-hidden">
                            <img class="w-100 h-100"
                                 style="object-fit: cover;"
                                 th:src="@{/assets/images/products/{pid}/1.jpg(pid=${item.id})}"
                                 onerror="this.onerror=null; this.src='/assets/images/products/default.jpg';"
                                 alt="product image">
                        </div>

                        <div th:if="${item.soldOut}"
                             class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"
                             style="background: rgba(0,0,0,.45);">
                            <div class="text-white fw-bold">품절</div>
                        </div>
                    </div>

                    <div class="card-body d-flex flex-column">
                        <div class="d-flex align-items-start justify-content-between gap-2">
                            <div class="fw-bold text-truncate" style="max-width: 170px;" th:text="${item.name}">상품명</div>

                            <span class="badge"
                                  th:classappend="${item.soldOut} ? ' bg-red-lt' : ' bg-green-lt'"
                                  th:text="${item.soldOut} ?
                                   ${T(sample.myshop.enums.product.SaleStatus).SOLDOUT.label}
                                    : ${T(sample.myshop.enums.product.SaleStatus).ACTIVE.label}">
                                IN STOCK
                            </span>
                        </div>

                        <div class="text-muted small mt-1">
                            SKU: <span th:text="${item.sku}">SKU</span>
                        </div>

                        <div class="mt-3">
                            <div class="h3 m-0">
                                <span th:text="${#numbers.formatInteger(item.price, 3, 'COMMA')}">10,000</span>
                                <span class="text-muted fs-5" th:text="${item.currency}">KRW</span>
                            </div>

                            <div class="text-muted small mt-1">
                                재고: <span th:text="${item.stockQuantity}">0</span>
                            </div>
                        </div>

                        <div class="mt-auto pt-3">
                            <a class="btn btn-primary w-100"
                               th:classappend="${item.soldOut} ? ' disabled' : ''"
                               th:href="@{/products/{id}(id=${item.id})}">
                                상품 보기
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 빈 상태 -->
            <div class="col-12" th:if="${#lists.isEmpty(cards)}">
                <div class="alert alert-info">
                    노출할 상품이 아직 없습니다. 먼저 상품을 등록해 주세요.
                </div>
            </div>

        </div>
    </div>

    <!-- TRUST -->
    <div class="container-xl my-5">
        <div class="row g-3">
            <div class="col-md-4">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">빠른 배송</div>
                        <div class="text-muted">주문 후 빠르게 준비해드려요.</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">간편 반품</div>
                        <div class="text-muted">정책은 추후 연결 예정.</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card card-sm">
                    <div class="card-body">
                        <div class="fw-bold">고객 지원</div>
                        <div class="text-muted">문의 기능은 다음 단계에서.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
